<% if flash[:notice] %>
  <div class="mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded"><%= notice %></div>
<% end %>
<div class="min-h-screen py-10 px-4 lg:px-8">
  <div class="container mx-auto max-w-6xl">
    <!-- ページタイトル -->
    <h1 class="text-4xl text-center font-bold text-gray-800 mb-8">マイページ</h1>

    <div class="flex justify-center">
      <!-- プロフィールカード -->
      <div class="bg-green-50 rounded-xl shadow-lg p-8 flex flex-col items-center space-y-6 max-w-md w-full">
        <!-- アバター -->
        <div class="flex flex-col items-center w-full">
          <%= image_tag current_user.avatar.url, class: "w-32 h-32 rounded-full shadow-lg border-4 border-green-200 object-cover" %>
          <div class="mt-6 flex items-center justify-center space-x-3">
            <h2 class="text-3xl font-bold text-gray-800"><%= current_user.name %></h2>
            <%= link_to edit_profile_path,
              class: "inline-flex items-center justify-center w-10 h-10 bg-green-500 hover:bg-green-600 text-white rounded-full transition focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2",
              aria: { label: "プロフィール編集" },
              title: "プロフィール編集" do %>
              <i class="fas fa-pencil text-sm"></i>
            <% end %>
          </div>
        </div>

        <!-- 登録日 -->
        <div class="w-full space-y-4">
          <div class="flex items-center space-x-3 text-gray-700">
            <i class="fas fa-clock text-green-600 text-lg"></i>
            <span class="text-lg">
              <span class="font-semibold">登録日:</span> <%= current_user.created_at.strftime('%Y年%m月%d日') %>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- カレンダーカード -->
    <div class="mt-8 max-w-2xl mx-auto">
      <%= render 'shared/calendar', note_dates: @note_dates %>
    </div>

    <!-- ノート表示エリア（初期は空） -->
    <div id="notes-list" class="mt-6 max-w-4xl mx-auto">
      <p class="text-center text-gray-500 py-8">
        カレンダーの日付をクリックすると、その日のノートが表示されます
      </p>
    </div>
  </div>
</div>
