  <div data-controller="sidebar">
    <!-- ダークオーバーレイ -->
    <div class="fixed inset-0 bg-black opacity-50 hidden z-40 transition-opacity duration-300"
         data-sidebar-target="overlay"
         data-action="click->sidebar#close"></div>

    <!-- サイドバー -->
    <nav class="fixed left-0 top-0 h-screen w-64 bg-green-200 shadow-lg transform transition-transform duration-300 z-50 overflow-y-auto -translate-x-full lg:translate-x-0"
         data-sidebar-target="sidebar">

      <div class="flex items-center justify-center p-4 border-b-2 border-green-300">
        <h2 class="text-xl font-bold text-gray-700">見習いノート</h2>
      </div>

      <div class="p-4 border-b-2 border-green-300">
        <!-- マイページボタン -->
        <%= link_to profile_path,
          class: "flex item-center space-x-3 px-4 py-3 hover:text-gray-900 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-green-300 transition #{current_page?(profile_path) ? 'bg-green-300' : ''}",
          aria: { label: "マイページ" },
          data: { action: "click->sidebar#close" } do %>
          <span>マイページ</span>
        <% end %>

        <!-- 通知ボタン -->
        <a href="#"
          class="flex items-center rounded-lg px-4 py-3 text-gray-700 hover:text-gray-900 hover:bg-green-300 transition"
          aria-label="通知">
          <span>通知(準備中)</span>
        </a>

        <!-- チームボタン -->
        <%= link_to teams_path,
          class: "flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 hover:text-gray-900 hover:bg-green-300 transition #{current_page?(teams_path) ? 'bg-green-300' : ''}",
          aria: { label: "チーム" }, 
          data: { current: current_page?(teams_path) } do %>
          <span>チーム</span>
        <% end %>

        <!-- 検索ボタン -->
        <%= link_to notes_path,
          class: "flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-700 transition #{current_page?(notes_path) ? 'bg-green-300' : ''}",
          aria: { label: "ノート検索", current: current_page?(notes_path) } do %>
          <span>検索</span>
        <% end %>
      </div>
      <!-- 情報セクション（常に表示） -->
      <div class="p-4 border-b-2 border-green-300">
        <%= link_to terms_path,
            class: "flex items-center space-x-3 px-4 py-3 text-gray-700 hover:text-gray-900 hover:bg-green-300 rounded-lg transition",
            aria: { label: "利用規約" },
            data: { action: "click->sidebar#close" } do %>
          <span>利用規約</span>
        <% end %>
        <%= link_to privacy_path,
            class: "flex items-center space-x-3 px-4 py-3 text-gray-700 hover:text-gray-900 hover:bg-green-300 rounded-lg transition",
            aria: { label: "プライバシーポリシー" },
            data: { action: "click->sidebar#close" } do %>
          <span>プライバシーポリシー</span>
        <% end %>
      </div>

      <!-- メニュー項目 -->
      <div class="p-4">
        <!-- ログアウト -->
        <%= link_to destroy_user_session_path,
            method: :delete,
            class: "flex items-center space-x-3 px-4 py-3 text-gray-700 hover:text-gray-900 hover:bg-green-300 rounded-lg transition",
            aria: { label: "ログアウト" },
            data: { action: "click->sidebar#close" } do %>
          <i class="fa-solid fa-sign-out-alt text-lg"></i>
          <span>ログアウト</span>
        <% end %>
      </div>
    </nav>

    <!-- ハンバーガーメニューボタン（モバイルのみ表示） -->
    <button class="lg:hidden fixed top-0 left-4 z-50 flex items-center justify-center w-12 h-16 text-gray-700 hover:text-gray-900 transition focus:outline-none"
            data-action="click->sidebar#toggle"
            data-sidebar-target="toggleButton"
            aria-label="メニューを開く"
            aria-expanded="false">
      <i class="fa-solid fa-bars text-xl transition-all duration-500"></i>
    </button>
  </div>
