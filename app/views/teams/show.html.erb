<div class="max-w-4xl mx-auto px-4 py-8">
  <!-- 戻るボタン -->
  <div class="mb-6">
    <%= link_to teams_path, class: "text-gray-600 hover:text-blue-600 font-semibold transition" do %>
      <i class="fas fa-arrow-left mr-2"></i>戻る
    <% end %>
  </div>

  <!-- ヘッダー -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-3"><%= @team.name %></h1>

    <!-- チーム説明 -->
    <% if @team.description.present? %>
      <p class="text-gray-600 text-base leading-relaxed mb-6">
        <%= @team.description %>
      </p>
    <% else %>
      <p class="text-gray-400 text-base italic mb-6">
        （説明はありません）
      </p>
    <% end %>

    <!-- メンバーボタン -->
    <%= link_to team_memberships_path(@team), class: "inline-block bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded shadow transition" do %>
      <i class="fas fa-users mr-1"></i>メンバー <span class="ml-1"><%= @team.team_memberships.size %></span>
    <% end %>
  </div>

  <!-- タブナビゲーション -->
  <div class="border-b border-gray-200 mb-6">
    <div class="flex space-x-6">
      <button type="button" data-tab="timeline" class="tab-btn px-4 py-3 border-b-2 border-blue-500 text-blue-600 font-semibold cursor-pointer transition active-tab">
        <i class="fas fa-stream mr-2"></i>タイムライン
      </button>
      <button type="button" data-tab="tags" class="tab-btn px-4 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-800 font-semibold cursor-pointer transition">
        <i class="fas fa-tags mr-2"></i>タグ
      </button>
    </div>
  </div>

  <!-- タイムラインタブ -->
  <div id="timeline-content" class="tab-content">
    <% if @notes.any? %>
      <div class="grid md:grid-cols-2 gap-4">
        <% @notes.each do |note| %>
          <%= render 'shared/note_card', note: note %>
        <% end %>
      </div>

      <!-- ページネーション -->
      <div class="mt-8 flex justify-center">
        <%= paginate @notes %>
      </div>
    <% else %>
      <div class="bg-gray-50 border border-gray-200 rounded-lg p-8 text-center">
        <p class="text-gray-600">チーム内にノートがまだありません</p>
      </div>
    <% end %>
  </div>

  <!-- タグタブ -->
  <div id="tags-content" class="tab-content hidden">
    <% if @tags.any? %>
      <div class="space-y-2">
        <% @tags.each do |tag| %>
          <div class="bg-white border border-gray-200 rounded-lg p-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
              <i class="fas fa-tag text-blue-500"></i>
              <span class="font-semibold text-gray-800"><%= tag.name %></span>
            </div>
            <span class="text-sm text-gray-500"><%= tag.notes.count %>個のノート</span>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="bg-gray-50 border border-gray-200 rounded-lg p-8 text-center">
        <p class="text-gray-600">チーム内にタグがまだありません</p>
      </div>
    <% end %>
  </div>

  <!-- タブ切り替え JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tabBtns = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');

      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');

          // すべてのタブボタンと内容を非アクティブにする
          tabBtns.forEach(b => {
            b.classList.remove('border-blue-500', 'text-blue-600', 'active-tab');
            b.classList.add('border-transparent', 'text-gray-600', 'hover:text-gray-800');
          });
          tabContents.forEach(content => {
            content.classList.add('hidden');
          });

          // アクティブなタブと内容を表示
          this.classList.remove('border-transparent', 'text-gray-600', 'hover:text-gray-800');
          this.classList.add('border-blue-500', 'text-blue-600', 'active-tab');
          document.getElementById(tabName + '-content').classList.remove('hidden');
        });
      });
    });
  </script>
</div>
